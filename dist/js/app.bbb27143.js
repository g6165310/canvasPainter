(function(t){function e(e){for(var n,a,r=e[0],c=e[1],l=e[2],d=0,h=[];d<r.length;d++)a=r[d],s[a]&&h.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},o=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/canvasPainter/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"1ffc":function(t,e,i){},"2a8e":function(t,e,i){},3784:function(t,e,i){"use strict";var n=i("1ffc"),s=i.n(n);s.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),s=i("2f62"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("TopPanel"),i("Canvas"),i("BottomPanel")],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"top-panel",class:{isHide:t.isHide}},[i("div",{staticClass:"btn-container"},[i("div",{staticClass:"btn save-btn",on:{click:t.save}},[i("i",{staticClass:"material-icons"},[t._v("save")]),t._v("SAVE\n    ")]),i("div",{staticClass:"btn addphoto-btn",on:{click:function(e){return t.$refs.uploadInput.click()}}},[i("i",{staticClass:"material-icons"},[t._v("add_photo_alternate")]),t._v("PHOTO\n      "),i("input",{ref:"uploadInput",attrs:{type:"file",hidden:"",accept:"image/jpeg, image/png"},on:{change:function(e){return t.uploadFile()}}})]),i("div",{staticClass:"btn clear-btn",on:{click:t.changeAllClear}},[i("i",{staticClass:"material-icons"},[t._v("crop_free")]),t._v("CLEAR ALL\n    ")]),i("div",{staticClass:"btn undo-btn",class:{disable:0===t.step},on:{click:t.undo}},[i("i",{staticClass:"material-icons"},[t._v("undo")]),t._v("UNDO\n    ")]),i("div",{staticClass:"btn redo-btn",class:{disable:t.step===t.records.length-1||0===t.step},on:{click:t.redo}},[i("i",{staticClass:"material-icons"},[t._v("redo")]),t._v("REDO\n    ")])]),i("div",{staticClass:"hide-btn",on:{click:function(e){e.preventDefault(),t.isHide=!t.isHide}}},[t.isHide?i("i",{staticClass:"material-icons"},[t._v("keyboard_arrow_down")]):i("i",{staticClass:"material-icons"},[t._v("keyboard_arrow_up")])])])},c=[],l=i("cebc"),u={name:"TopPanel",data:function(){return{isHide:!1}},computed:Object(l["a"])({},Object(s["b"])(["step","records"])),methods:{changeAllClear:function(){this.$store.commit("CLEARALL",!0)},save:function(){this.$store.commit("SAVE",!0)},undo:function(){this.$store.commit("UNDO",!0)},redo:function(){this.$store.commit("REDO",!0)},uploadFile:function(){this.$store.commit("UPLOAD",!0);var t=this.$refs.uploadInput.files[0],e=this;if(t){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){e.$store.commit("STEP",e.step+1),e.$store.dispatch("updateRecords",{step:e.step,data:i.result}),e.$store.commit("UPLOADFILE",i.result)}}}}},d=u,h=(i("9546"),i("2877")),f=Object(h["a"])(d,r,c,!1,null,"59c7a822",null),p=f.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom-panel",class:{isHide:t.isHide}},[i("div",{staticClass:"panel-inner"},[i("div",{staticClass:"brush-btn",class:{active:"draw"===t.mode},on:{click:function(e){return t.changeMode("draw")}}},[i("i",{staticClass:"material-icons"},[t._v("brush")])]),i("div",{staticClass:"eraser-btn",class:{active:"eraser"===t.mode},on:{click:function(e){return t.changeMode("eraser")}}},[i("i",{staticClass:"material-icons"},[t._v("crop_portrait")])]),i("div",{staticClass:"size-selector"},[t._v("\n      SIZE:\n      "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.brushSize,expression:"brushSize"}],attrs:{type:"number",min:"1",max:"100"},domProps:{value:t.brushSize},on:{input:function(e){e.target.composing||(t.brushSize=e.target.value)}}}),t._v("\n      px\n    ")]),i("div",{staticClass:"color-selector"},[t._v("\n      COLOR:\n      "),i("ul",{staticClass:"colors"},[t._l(t.defaultColor,function(e,n){return i("li",{key:n,style:"#FFFFFF"==e?{backgroundColor:e,border:"2px solid #000"}:{backgroundColor:e},on:{click:function(i){return t.setColor(e)}}},[t.currentColor==e?i("i",{staticClass:"material-icons",class:{white:"#000000"==e}},[t._v("check")]):t._e()])}),i("li",{style:{backgroundColor:t.selectedColor},on:{click:function(e){return t.$refs.colorInput.click()}}},[i("i",{staticClass:"material-icons"},[t._v("palette")]),i("input",{ref:"colorInput",attrs:{type:"color",name:"",id:"",hidden:""},on:{change:t.selectColor}})])],2)])]),i("div",{staticClass:"hide-btn",class:{isHide:t.isHide},on:{click:function(e){e.preventDefault(),t.isHide=!t.isHide}}},[t.isHide?i("i",{staticClass:"material-icons"},[t._v("brush")]):i("i",{staticClass:"material-icons"},[t._v("keyboard_arrow_down")])])])},m=[],b={name:"BottomPanel",data:function(){return{defaultColor:["#FFFFFF","#000000","#9BFFCD","#00CC99","#01936F"],selectedColor:"#e8e8e8",isHide:!1}},methods:{setColor:function(t){"draw"===this.mode&&this.$store.dispatch("changeColor",t)},changeMode:function(t){this.$store.dispatch("changeMode",t)},selectColor:function(t){this.selectedColor=t.target.value,this.setColor(t.target.value)}},computed:Object(l["a"])({},Object(s["b"])(["currentColor","mode"]),{brushSize:{get:function(){return this.$store.getters.brushSize},set:function(t){console.log(t),this.$store.commit("BRUSHSIZE",t)}}})},g=b,C=(i("b36c"),Object(h["a"])(g,v,m,!1,null,"26feabe7",null)),w=C.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("canvas",{ref:"canvas"}),i("div",{staticClass:"point",style:t.pointStyle})])},_=[],O={name:"Canvas",data:function(){return{canvas:null,ctx:null,isDrawing:!1,position:{lastX:0,lastY:0},pointStyle:{top:"0px",left:"0px",backgroundColor:"#000000",width:"20px",height:"20px"}}},methods:{init:function(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.canvas.height=window.innerHeight,this.canvas.width=window.innerWidth,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.fillStyle="#e8e8e8",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.clearAll&&this.$store.commit("STEP",-1),this.saveRecord()},draw:function(t){if(this.isDrawing){this.ctx.beginPath(),this.ctx.moveTo(this.position.lastX,this.position.lastY),this.ctx.lineTo(t.offsetX,t.offsetY),this.ctx.strokeStyle=this.currentColor,this.ctx.lineWidth=this.brushSize,this.ctx.stroke(),this.position.lastX=t.offsetX,this.position.lastY=t.offsetY}},saveRecord:function(){this.$store.commit("STEP",this.step+1),console.log(this.records),this.$store.dispatch("updateRecords",{step:this.step,data:this.canvas.toDataURL()})},setPosition:function(t){this.isDrawing=!0,this.position={lastX:t.offsetX,lastY:t.offsetY}},mouseMove:function(t){this.isDrawing&&this.draw(t),this.pointStyle.top="".concat(t.clientY-this.brushSize/2,"px"),this.pointStyle.left="".concat(t.clientX-this.brushSize/2,"px"),this.pointStyle.backgroundColor=this.currentColor,this.pointStyle.width="".concat(this.brushSize,"px"),this.pointStyle.height="".concat(this.brushSize,"px")},mouseup:function(){this.isDrawing=!1,this.saveRecord()},clear:function(){this.ctx.fillStyle="#e8e8e8",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},resize:function(){this.canvas.height=window.innerHeight,this.canvas.width=window.innerWidth}},computed:Object(l["a"])({},Object(s["b"])(["currentColor","brushSize","clearAll","isSaving","isUndo","isRedo","records","step","isUploading","uploadFile","mode"])),watch:{clearAll:function(t){t&&(this.init(),this.$store.commit("CLEARALL",!1))},mode:function(t){"eraser"===t?this.$store.dispatch("changeColor","#e8e8e8"):this.$store.dispatch("changeColor","#000000")},isSaving:function(t){if(t){var e=this.canvas.toDataURL(),i=document.createElement("a");i.href=e,i.download="image.png",i.click(),this.$store.commit("SAVE",!1)}},isUndo:function(t){var e=this;if(t&&this.step>0){this.$store.commit("STEP",this.step-1);var i=new Image;i.src=this.records[this.step],i.onload=function(){e.ctx.drawImage(i,0,0)},this.$store.commit("UNDO",!1)}},isRedo:function(t){var e=this;if(console.log("here"),t&&this.step>0){this.$store.commit("STEP",this.step+1);var i=new Image;console.log(this.records,this.step),i.src=this.records[this.step],i.onload=function(){e.ctx.drawImage(i,0,0)},this.$store.commit("REDO",!1)}},uploadFile:function(t){var e=new Image,i=this;e.src=t,e.onload=function(){var t=window.innerWidth/2-e.width/2,n=window.innerHeight/2-e.height/2;console.log(t,n),i.ctx.drawImage(e,t,n)},this.$store.commit("UPLOAD",!1)}},mounted:function(){this.init(),this.canvas.addEventListener("mousemove",this.mouseMove),this.canvas.addEventListener("mousedown",this.setPosition),this.canvas.addEventListener("mouseup",this.mouseup)}},x=O,R=(i("3784"),Object(h["a"])(x,S,_,!1,null,"8ac010e8",null)),E=R.exports,y={name:"app",components:{TopPanel:p,BottomPanel:w,Canvas:E}},$=y,k=(i("5c0b"),Object(h["a"])($,o,a,!1,null,null,null)),P=k.exports;i("af87");n["a"].use(s["a"]);var D=new s["a"].Store({state:{currentColor:"#000000",brushSize:20,mode:"draw",clearAll:!1,isSaving:!1,isUndo:!1,isRedo:!1,step:-1,records:[],isUploading:!1,uploadFile:null},mutations:{CURRENTCOLOR:function(t,e){t.currentColor=e},BRUSHSIZE:function(t,e){t.brushSize=e},MODE:function(t,e){t.mode=e},CLEARALL:function(t,e){t.clearAll=e},SAVE:function(t,e){t.isSaving=e},UNDO:function(t,e){t.isUndo=e},REDO:function(t,e){t.isRedo=e},RECORDS:function(t,e){e?t.records[e.step]=e.data:t.records=[]},STEP:function(t,e){t.step=e},UPLOAD:function(t,e){t.isUploading=e},UPLOADFILE:function(t,e){t.uploadFile=e}},actions:{changeColor:function(t,e){t.commit("CURRENTCOLOR",e)},changeSize:function(t,e){t.commit("BRUSHSIZE",e)},changeMode:function(t,e){t.commit("MODE",e)},updateRecords:function(t,e){t.commit("RECORDS",e)}},getters:{currentColor:function(t){return t.currentColor},brushSize:function(t){return t.brushSize},mode:function(t){return t.mode},clearAll:function(t){return t.clearAll},isSaving:function(t){return t.isSaving},isUndo:function(t){return t.isUndo},isRedo:function(t){return t.isRedo},step:function(t){return t.step},records:function(t){return t.records},isUploading:function(t){return t.isUploading},uploadFile:function(t){return t.uploadFile}}});n["a"].config.productionTip=!1,n["a"].use(s["a"]),new n["a"]({store:D,render:function(t){return t(P)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("5e27"),s=i.n(n);s.a},"5e27":function(t,e,i){},9546:function(t,e,i){"use strict";var n=i("2a8e"),s=i.n(n);s.a},b36c:function(t,e,i){"use strict";var n=i("f000"),s=i.n(n);s.a},f000:function(t,e,i){}});
//# sourceMappingURL=app.bbb27143.js.map